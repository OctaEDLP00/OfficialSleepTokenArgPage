---
import type { ReleaseDate } from '~/types/index.d'

interface Props {
  name: string;
  imgName: string;
  width: string | number | null | undefined;
  height: string | number | null | undefined;
  alt: string;
  releaseDate: ReleaseDate | string;
  slug: string
}

const { name, imgName, width, height, alt, releaseDate, songsUrl } = Astro.props
---

<div class="group">
  <div class="relative overflow-hidden mb-4">
    <img
      src={`/images/albums/${imgName}.webp`}
      alt={alt}
      width={width}
      height={height}
      class="w-full aspect-square object-cover transition-transform duration-500 group-hover:scale-110"
    >
    {
      Number(releaseDate.split(/[-/]/g)[2]) === new Date().getFullYear() && (
        <div class="absolute top-4 right-4">
          <span class="bg-vessel-500 text-white px-3 py-1 text-sm">NUEVO</span>
        </div>
      )
    }
    <div class="absolute inset-0 bg-gradient-to-t from-ritual-900 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 flex items-end p-6">
      <button class="w-12 h-12 rounded-full bg-vessel-500 flex items-center justify-center hover:bg-vessel-400 transition-colors">
        <i class="fas fa-play"></i>
      </button>
    </div>
  </div>
  <h3 class="font-ritual text-xl mb-1">{name}</h3>
  <p class="text-gray-400 text-sm">{releaseDate.split(/[-/]/g)[2]}</p>
  <div class="mt-3">
    <a href={`/album/${songsUrl}`} class="text-vessel-500 hover:text-vessel-400 text-sm transition-colors">Ver canciones</a>
  </div>
</div>
